var prevlat2,prevLng2;$(document).ready((function(){initMap2()}));var markers2=[],map2,infoWindow;function initMap2(zoom=10){map2=new google.maps.Map(document.getElementById("map2"),{center:{lat:prevlat2,lng:prevLng2},zoom:zoom});var position={lat:prevlat,lng:prevLng};if(marker&&marker.setMap(null),marker=new google.maps.Marker({position:position,map:map}),infoWindow=new google.maps.InfoWindow,$("input[name='second_latlng']").val()&&""!=$("input[name='second_latlng']").val()){var location=addMarker("("+parseInt($("input[name='second_lat']").val())+","+parseInt($("input[name='second_lng']").val())+")");marker&&marker.setMap(null);var marker=new google.maps.Marker({position:new google.maps.LatLng(parseInt($("input[name='second_lat']").val()),parseInt($("input[name='second_lng']").val())),map:map2,title:""}),contentString='<div id="content" style="width: 200px; height: 200px;"><h1>Overlay</h1></div>',infowindow=new google.maps.InfoWindow({content:contentString});google.maps.event.addListener(marker,"click",(function(){infowindow.open(map2,marker)})),marker.setMap(map2)}markers2.push(marker),markers.push(marker),$(".get-second-location").on("click",(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};infoWindow.setPosition(pos),infoWindow.setContent("Location found."),infoWindow.open(map2),map2.setCenter(pos)}),(function(){handleLocationError(!0,infoWindow,map2.getCenter())})):handleLocationError(!1,infoWindow,map2.getCenter())}));var geocoder=new google.maps.Geocoder;function addMarker(location){var marker=new google.maps.Marker({position:location,map:map2});markers2.push(marker)}function setMapOnAll(map2){for(var i=0;i<markers2.length;i++)markers2[i].setMap(map2)}function clearMarkers(){setMapOnAll(null)}function deleteMarkers(){clearMarkers(),markers2=[]}""!=$("input[name='second_latlng']").val()&&addMarker($("input[name='second_latlng']").val()),google.maps.event.addListener(map2,"click",(function(event){var latitude=event.latLng.lat(),longitude=event.latLng.lng();$("input[name='second_lat']").val(latitude),$("input[name='second_lng']").val(longitude),$("input[name='second_latlng']").val(event.latLng),splitLatLng(String(event.latLng)),geocoder.geocode({latLng:event.latLng},(function(results,status){status==google.maps.GeocoderStatus.OK&&results[0]&&(deleteMarkers(),addMarker(event.latLng))}))}))}function handleLocationError(browserHasGeolocation,infoWindow,pos){infoWindow.setPosition(pos),infoWindow.setContent(browserHasGeolocation?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),infoWindow.open(map2)}function splitLatLng(latLng){var newString,newString2,trainindIdArray=latLng.substring(0,latLng.length-1).substring(1).split(","),lat=trainindIdArray[0],Lng=trainindIdArray[1];$("input[name='second_lat']").val(lat),$("input[name='second_lng']").val(Lng)}$("input[name='second_lat']").val()&&""!=$("input[name='second_lng']").val()&&null!=$("input[name='second_latlng']").val()?(prevlat2=parseInt($("input[name='second_lat']").val()),prevLng2=parseInt($("input[name='second_lng']").val())):(prevlat=29.3166497,prevLng=47.7273433);